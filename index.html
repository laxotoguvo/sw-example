<html>
    <head>
    </head>
    <body>
        <H1>LOADED</H1>
        <button id="test"> CLICK ME BIATCHHHHH </button>
       
        <script>
            let button = document.getElementById("test");
            button.onclick = (() => {
var debug = "console.log('fucking works');";
var blob = new Blob([debug], {type : 'application/javascript'});
                var url = URL.createObjectURL(blob);
                navigator.serviceWorker.register(url, {
                    // The scope cannot be parent to the script url
                    scope: './'
                }).then(()=>{
                    console.log("Done");
                }).catch((e)=> {
                 console.log("Catch");
                 console.log(e);
                });
            })
        </script>
        
        <script>
          caches.open( 'myCache' ).then( function( cache )
          {
              respText = "console.log('hello');"
           cache.put('/my_workers/worker1.js',
            new Response( respText, { headers: {'content-length':respText.length, 'content-type':'application/javascript'}})
           );
          });
        </script>
        <script src="/my_workers/worker1.js"></script>
    </body>
</html>
